#### eks生命周期管理方案问题（cluster-api）
##### 1.每台虚拟机需要指定:
- fip(目前需要额外代码支持 因为machinedeployment创建的虚拟机默认没有申请fip)
- name(需要更改代码) 实际是由引用的openstackmachinetemplate 的名字加5个随机字符组成
- Az(eks目前master节点支持在一个区域内 work节点每个节点均支持单独区域)支持 machinedeployment
- 调度到具体的计算节点(eks目前不支持)可做 但如何输入映射关系呢
- subnet/ip 地址(在openstacktemplate中指定 ) 可做 如何输入映射关系 machinedeployment本身支持多副本 即使单独创建machine 需要自己创建单独的openstackmachine资源和kubeadm资源(可以想象为pod) 一台一台指定？
- 系统盘(名字/大小/type)支持  名字不支持自定义 现在默认的是虚拟机名称-root
- 数据盘(名字/大小/type)不支持 需要更改代码 相关链接https://github-com.translate.goog/kubernetes-sigs/cluster-api/blob/main/docs/proposals/20200423-etcd-data-disk.md?_x_tr_sl=auto&_x_tr_tl=zh-CN&_x_tr_hl=en
##### 2.模拟扩容10个worker节点失败：mariadb/rabbitmq error；参数填错(volume type填错)；quota/resource 
quota/resource 不够已验证 需要删除machine对应的资源 自己会重新进行扩容 能反复继续扩容最终扩容成功 不影响集群已经包含的节点 
##### 3.支持删除指定节点，删除失败可以继续删除
支持删除指定节点 未遇到删除失败 可以强制删除此crd(需要手动删除对应的虚拟机资源)
指定work节点的删除 并不创建新的节点 依赖副本数的做法
- RandomMachineSetDeletePolicy MachineSetDeletePolicy = "Random"此删除策略下
使用DeleteMachineAnnotation = "cluster.x-k8s.io/delete-machine" 此标记标记machine 在scale down副本数时会优先考虑在此节点和不健康的机器随机选择.
- NewestMachineSetDeletePolicy MachineSetDeletePolicy = "Newest" 此删除策略
使用DeleteMachineAnnotation = "cluster.x-k8s.io/delete-machine" 此标记标记machine 则在scale down副本数时会优先考虑在此节点和不健康的机器选择创建时间更加后面的机器
- OldestMachineSetDeletePolicy MachineSetDeletePolicy = "Oldest" 此删除策略
使用DeleteMachineAnnotation = "cluster.x-k8s.io/delete-machine" 此标记标记machine 则在scale down副本数时会优先考虑在此节点和不健康的机器选择创建时间更加靠前的机器

machine不健康的判断依据为Status.FailureReason or Status.FailureMessage 没有设置为空或者
NodeHealthy type of Status.Conditions 不为 true) 前面两个条件基本是创建虚拟机失败与否 最后一个条件的判断标准是work集群kubectl get node 列表中有无此节点  因此当节点不健康 直接收缩 就可以剔除不健康节点
##### 4.集群升级
如果capi只支持虚拟机创建 则不负责此部分

##### 5.对接当前页面，包括：租户管理员/普通用户看到各自权限的页面
可以正确展示和记录配额 配额完全由使用的用户权限文件控制 无其他权限控制 

##### 6.支持节点角色 分离/融合部署，即独立的 ingress、日志/监控节点 
如果capi只支持虚拟机创建 则不负责此部分


创建虚拟机过程
1.创建cluster资源 不引用master平面
```
apiVersion: cluster.x-k8s.io/v1beta1
kind: Cluster
metadata:
  name: test
  namespace: default
spec:
  clusterNetwork:
    pods:
      cidrBlocks:
      - 192.168.0.0/16
    serviceDomain: cluster.local
  infrastructureRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
    kind: OpenStackCluster
    name: test
```

2.创建openstackcluster资源(nodeCidr有会自己创建网络 否则应当在openstacktemplate中使用存在的网络)
```
apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
kind: OpenStackCluster
metadata:
  name: test
  namespace: default
spec:
  apiServerLoadBalancer:
    enabled: false
  cloudName: test
  dnsNameservers:
  - 10.222.0.3
  externalNetworkId: 0d0d08e8-e12f-4bf4-a4f3-9f65c188e76f
  identityRef:
    kind: Secret
    name: test-cloud-config
  managedSecurityGroups: true
  nodeCidr: 10.6.0.0/24
```
3.创建两个secret
分别为openstack认证文件base64 secret
```
apiVersion: v1
data:
  cacert: Cg==
  clouds.yaml: Y2xvdWRzOgogIHRlc3Q6CiAgICBpZGVudGl0eV9hcGlfdmVyc2lvbjogMwogICAgYXV0aDoKICAgICAgYXV0aF91cmw6IGh0dHA6Ly9rZXlzdG9uZS5vcGVuc3RhY2suc3ZjLmNsdXN0ZXIubG9jYWwvdjMKICAgICAgcHJvamVjdF9kb21haW5fbmFtZTogRGVmYXVsdAogICAgICB1c2VyX2RvbWFpbl9uYW1lOiBEZWZhdWx0CiAgICAgIHByb2plY3RfbmFtZTogYWRtaW4KICAgICAgdXNlcm5hbWU6IGFkbWluCiAgICAgIHBhc3N3b3JkOiB0ZXN0QHBhc3N3MHJkCiAgICByZWdpb25fbmFtZTogUmVnaW9uT25lCg==
kind: Secret
metadata:
  name: test-cloud-config
  namespace: default
type: Opaque
```
cloud.init文件secret
```
apiVersion: v1
data:
  format: Y2xvdWQtY29uZmln
  value: IyMgdGVtcGxhdGU6IGppbmphCiNjbG91ZC1jb25maWcKCndyaXRlX2ZpbGVzOgotICAgcGF0aDogL2V0Yy9rdWJlcm5ldGVzL3BraS9jYS5jcnQKICAgIG93bmVyOiByb290OnJvb3QKICAgIHBlcm1pc3Npb25zOiAnMDY0MCcKICAgIGNvbnRlbnQ6IHwKICAgICAgLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCiAgICAgIE1JSUM2akNDQWRLZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKICAgICAgY201bGRHVnpNQjRYRFRJeU1EZ3dNekE0TWpBME5Wb1hEVE15TURjek1UQTRNalUwTlZvd0ZURVRNQkVHQTFVRQogICAgICBBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS2VvCiAgICAgIFpwWng3Y1RXS0ZTd2VCVnUrMmJBd0IwaU8rRE9JTDgwaUtpc3krUkJ2ZkZjVzh6a3FWajJQWmxldUNTU3M5b0gKICAgICAgMDQzUTUxRk95TmQrWWhnQ1pwcEpUNnZlV2FCVEtyTDZnS1FMZ2NjYlYrRlZaRkVTUXYvOVdpWWtjS3R2NDg1LwogICAgICBWdTdIZlBpZmNGbXdhR0Y3bFNMc2k1VnJ2Qjl1RkdKbkFhMDlxdDhYTW5zZXhRNjhHNUJiS09YTlUrUFVCVDhHCiAgICAgIEkyM1VEaWtlNXE5N0hoZzNrNzYrZ2VzbTdYWFZjRnlFK25uRmpNeWN1cDlPL1VZckxBeXlZRWRFc1N0YmVyREkKICAgICAgTkdXWU50Q1U5aHl1a0daeTVqaFhoMEhiUXd4dG8rbXdMa2hiK0lPeXd2QWlCRzZvR1EyOXd2Y3BldXJmYm16VAogICAgICBSZEZrdkZvYjJpaHlsN3ZCWTZzQ0F3RUFBYU5GTUVNd0RnWURWUjBQQVFIL0JBUURBZ0trTUJJR0ExVWRFd0VCCiAgICAgIC93UUlNQVlCQWY4Q0FRQXdIUVlEVlIwT0JCWUVGTExxdWF0cW90VzBKSFI2WGtvdWRlUi9HelZxTUEwR0NTcUcKICAgICAgU0liM0RRRUJDd1VBQTRJQkFRQlNhUTVHaW1FOUNYSW9GT3J6V2MyaUZ0UmNyRGFxaWVvVWs3UzNia3NodDErcgogICAgICBuS0d1S0pFZ3V3NGNYM3d2UmtCN2JmWDRXTkJpUkdnSkI3VjloaWk2OUNWejJMbDRwMnZtb3BVdGdwZVg4NkZjCiAgICAgIERGWDMwZkJwSmVVekRjY2NyQjF3M25qUENsWEJHOUU1YXJvd2pLSzBpN1EwTFhsUnJVK1oyUHRXSzNGTk96NnEKICAgICAgSm1GNkw1UUZOdmRIQjZINHp5UkhtODloOEU1d1BNKzNKaWVJNS8vWHNYV0haTU1tTDMrTTlWT2hUVWJ5RWpNcAogICAgICBuWVFsdklRQzU0NnhiOTgxdWdJSlRBKzl3MllYWmgrYk1CWThFU1RMNFk4b0VkRzRFYU15SU82Z24rT2Q4amVVCiAgICAgIDFJMVNteVB2SjcydTQrMnErSHQyMDRZWlNRWDhBTGE1dDBMS0dEQTgKICAgICAgLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQogICAgICAKLSAgIHBhdGg6IC9ldGMva3ViZXJuZXRlcy9wa2kvY2Eua2V5CiAgICBvd25lcjogcm9vdDpyb290CiAgICBwZXJtaXNzaW9uczogJzA2MDAnCiAgICBjb250ZW50OiB8CiAgICAgIC0tLS0tQkVHSU4gUlNBIFBSSVZBVEUgS0VZLS0tLS0KICAgICAgTUlJRW93SUJBQUtDQVFFQXA2aG1sbkh0eE5Zb1ZMQjRGVzc3WnNEQUhTSTc0TTRndnpTSXFLekw1RUc5OFZ4YgogICAgICB6T1NwV1BZOW1WNjRKSkt6MmdmVGpkRG5VVTdJMTM1aUdBSm1ta2xQcTk1Wm9GTXFzdnFBcEF1Qnh4dFg0VlZrCiAgICAgIFVSSkMvLzFhSmlSd3EyL2p6bjlXN3NkOCtKOXdXYkJvWVh1Vkl1eUxsV3U4SDI0VVltY0JyVDJxM3hjeWV4N0YKICAgICAgRHJ3YmtGc281YzFUNDlRRlB3WWpiZFFPS1I3bXIzc2VHRGVUdnI2QjZ5YnRkZFZ3WElUNmVjV016Snk2bjA3OQogICAgICBSaXNzRExKZ1IwU3hLMXQ2c01nMFpaZzIwSlQySEs2UVpuTG1PRmVIUWR0RERHMmo2YkF1U0Z2NGc3TEM4Q0lFCiAgICAgIGJxZ1pEYjNDOXlsNjZ0OXViTk5GMFdTOFdodmFLSEtYdThGanF3SURBUUFCQW9JQkFRQ1NwRjZtZEJ2TnNLc3gKICAgICAgOSsvd2YxUHcrZUtQR09SYXFyQkZ6VU5DbFhENHd1L0o3a2gxSEFOclJtVjJnang1OEw3U2swbmNucjNVaGg1eAogICAgICBMWi9LOUQ2ZDhFVjVSRkFNUlBIeC9kMEtudTN5SXQ1b3Z2R3hYMUd1NmdBeG9HblQ2VmZOdzk5YmxxeWVJWVo1CiAgICAgIFRDemdKdUc0M0VEeWZucmEyc09GbGljSFNncnNlTWlhb3psTTlCdUpGYkxuU2U4YTBQSGdsWUdwRTVjc3lFUGgKICAgICAgdGkwMlFhTTlja09hNEVudFNRR0tRQTEzSzkvR3hwT2ZUQ2hQVnJ0MFN2M3NGeFN3WEpPUyt3dGtxYk9YYzlnTwogICAgICBpQWk2VmthSmR6Z01ybDdmSWZ6amtoYnZXcXdhR3piU2taWmdKaVVWdlpVeUcxdm5oUXhoS0ZiV1hDbUJ4MXdrCiAgICAgIGRvTEU4ekp4QW9HQkFOeFlmMURrSmxqRktHOFhwaEszUE9QN21pZkx1bXhJR2VOVlFqSWhMU1Q4dlVtS3lXYmsKICAgICAgaWVuUkxiTnRFK0ZHNnFMUkxJVjVuUXlrZC94RGgyMDhWb2tObUdrN0E3Zm1nQ3JXVkVkK0JMV216MUFvSnRRbwogICAgICBHNnJiM2h5Wm5jVUJ4a3hsOFhMMm8yamRWSTNPZmxEb2cxQWxNeEptREFNOGp3ZUJ2RlRoUHoxVkFvR0JBTUxKCiAgICAgIFlsQ0VtR3VqajdVOGsyMmlZcVIxYXIyRWVkMVVKWWdTdG1jN3k2U1lWdFp3MzBTdG1LcmtWUTREYUY2ckhvSC8KICAgICAga0xlbHIvaXVyb08rd3c4S2RqRm5xNGJrTlhuYzFteVJNWWdKb3BjQWRheXd5KzlzOExIQ3dHOWZjQUVGTjlxWQogICAgICAxaHdUcGFvRWdkakxZVjR0Vmh1RTFXUVQ1ZGxwN3NNM3J5NTIxaHovQW9HQURwODh5NlJvT3duU1ZoVHVxMTFICiAgICAgIGlDV0JKRlRycVJYYnllODFkbGduUThZVjFaU0ZLdlBOaHh1ZmVjR3FTUS9Jc0VkTE9neEk5TGJSVTRjenJIY04KICAgICAga3dpNDdYckNFMmtUWmtSVTBXMjJhRXVLaEZvMXdXeHI4Wm1ua3FSTENQREdOUG1xM1NNcTB1R2xJOGZwTC90TwogICAgICBBM3FFZWhzVmZ2MTh6Rlc2cHJOUDNBVUNnWUFBdU9SdmJmNXVyNzJScTNiVWVqeXBaWElPMzlYZjF6Y0lhU0ZhCiAgICAgIEFxTy9xWHp3OEp3elVmMTE3TURQKzMxQWxKdlpXWXc4MGhWejg1bmNEVElGOVVENDcreDM1Sks2TC9KdmxwNDcKICAgICAgWmVXL2I1WUFIT3UwcUkrLzZQdnpyY1BwalE1bTloZ2RKSW1CdHVDUVlEaXRNN2ZWQkVvU1EreWZRTUJNNHdENAogICAgICBTQ0tGR3dLQmdDWGNzY20zTjA5V3p4N1VnZGpBMndEYmlHZGtzTDdyNENDdGcybnZDTExXVnBMbXE2UDgxOTErCiAgICAgIEMvWGQ5a3grN0NJQ1hPblJzS2NGcGhGUkR6bmZpcEJFbmFSdXhnNFVqa1RBNUN0OFFNQVR3a0E3RFA2OFNNeGcKICAgICAgOXZ1MlhsMDhNNzhpQlE5S2poeVJJRm5oN25FaGt2S3NnZjhHcmliZXFnOWJReGdLVER3VQogICAgICAtLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQogICAgICAKLSAgIHBhdGg6IC9ldGMva3ViZXJuZXRlcy9wa2kvZXRjZC9jYS5jcnQKICAgIG93bmVyOiByb290OnJvb3QKICAgIHBlcm1pc3Npb25zOiAnMDY0MCcKICAgIGNvbnRlbnQ6IHwKICAgICAgLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCiAgICAgIE1JSUM2akNDQWRLZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKICAgICAgY201bGRHVnpNQjRYRFRJeU1EZ3dNekE0TWpBME5sb1hEVE15TURjek1UQTRNalUwTmxvd0ZURVRNQkVHQTFVRQogICAgICBBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS2srCiAgICAgIFg2VEZIUlRDUFk4Z2pwOWczRmpnZHh6SVJWa1hxMEVHbC94RUJSdVdVOUZDU3k2QnF3dHZ3ZkpiazlzNTdONXgKICAgICAgd1d0NVZiNWRhWjA0U0JxYktkaFNlWEpJZUVXV21wTlVKZjgwd0w0aVJCYjR3eVdzcFk0UGdocjgyTTdwa0V5KwogICAgICBpOUdhTk5heG9ZakwvcFNHZzJySG5xOXZFanRwM1pYWUxmbjVaMnU2TUFWbUdKY3lTYkxoaW1aYUFvZ25mOXJhCiAgICAgIFFOcUxNL2wzNmlFOFlwTDRSa21NdXlBdVVPL1dYTmhSOVlPdjN4aTdmU2JRYnhxU1lCeXNnR1VZa1ZSbkRLWTUKICAgICAgRW1PNHBiWWRDaVdWc28za1lkQ2xUSTNpTURwVmZITnJnM3c3MExDRnp4V0k1OHVmMHI2RW56VU00UmFRUWdiKwogICAgICB4bVpVc3BsamdaMGxQQTVLaXFVQ0F3RUFBYU5GTUVNd0RnWURWUjBQQVFIL0JBUURBZ0trTUJJR0ExVWRFd0VCCiAgICAgIC93UUlNQVlCQWY4Q0FRQXdIUVlEVlIwT0JCWUVGRDBFdi8xODY5VkJmaE9iV2d3QWlSc3lVQnJXTUEwR0NTcUcKICAgICAgU0liM0RRRUJDd1VBQTRJQkFRQVJrT2MxVmx6czA1aUszME1hcUtibVoxZzVibUVRcWNzUk05ODUza1RkM01RSgogICAgICB0TTQ0RnpuZ2J0YzB0WG5oemo2RFZob3JUcjhsdTFPU0tmSkR1ekFSa2NKcGd0dTlFcUQrQ3ZCeEx6aGp2djZHCiAgICAgIHE1bm0ydFM2NmZmb1NvSE8wRXJSRzlGSG9obXJxVk1IUkZhWmlJUkdlNkVLOGF0QjhBU1JYWDFRbkV3eDFWQWUKICAgICAgUlA2TUIzTitJdm1TT1prbHdTdnh1ekhmQzBUZys2U3RCYnhEdTJ3bVloSUxwRWkwb0JkRlBFYmVacjZMVWY1bAogICAgICBmZ0Y5dFpxcUhTV3Fsb3lWQmdlZFhkb0JOZk52ZDVVc1ZSMlpWbm81NlJQcVJQQUxWSlVPd0tsUmUrSUpmWmlpCiAgICAgIEZmbUNva2VIL3ZOd0pLRmZ3OGQ1YmlkdkNtK2hWMlBTd1lIOUlHVnYKICAgICAgLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQogICAgICAKLSAgIHBhdGg6IC9ldGMva3ViZXJuZXRlcy9wa2kvZXRjZC9jYS5rZXkKICAgIG93bmVyOiByb290OnJvb3QKICAgIHBlcm1pc3Npb25zOiAnMDYwMCcKICAgIGNvbnRlbnQ6IHwKICAgICAgLS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQogICAgICBNSUlFb3dJQkFBS0NBUUVBcVQ1ZnBNVWRGTUk5anlDT24yRGNXT0IzSE1oRldSZXJRUWFYL0VRRkc1WlQwVUpMCiAgICAgIExvR3JDMi9COGx1VDJ6bnMzbkhCYTNsVnZsMXBuVGhJR3BzcDJGSjVja2g0UlphYWsxUWwvelRBdmlKRUZ2akQKICAgICAgSmF5bGpnK0NHdnpZenVtUVRMNkwwWm8wMXJHaGlNditsSWFEYXNlZXIyOFNPMm5kbGRndCtmbG5hN293QldZWQogICAgICBsekpKc3VHS1psb0NpQ2QvMnRwQTJvc3orWGZxSVR4aWt2aEdTWXk3SUM1UTc5WmMyRkgxZzYvZkdMdDlKdEJ2CiAgICAgIEdwSmdIS3lBWlJpUlZHY01wamtTWTdpbHRoMEtKWld5amVSaDBLVk1qZUl3T2xWOGMydURmRHZRc0lYUEZZam4KICAgICAgeTUvU3ZvU2ZOUXpoRnBCQ0J2N0dabFN5bVdPQm5TVThEa3FLcFFJREFRQUJBb0lCQUNsMmxvZ1BvcWhMVGptYQogICAgICBpRmFUckdnNTFmUy9PLzR2eGswUUNIeE5UZE1NYVV5REtWZ2pmSHc0elJOTFRGWVJRdTdjZjc2TTQyellCZC8yCiAgICAgIHdmT0N3Q1czVHZtb3Q0NlU3eG5aSzlYeVhxWTJUdWd4MmQySkJxWmZOa2pXV1dlWDRUcHNGR1V0bW5SZTRHeGIKICAgICAgVGV1bGFOem9Pd0JQL2UrQWFFRWx6VjNJdElXM21YNWxUR0VBMTZqM2I4SUg4dGlpdWdGZ2xOREI1NWZxVFl2TAogICAgICBqMjgwK0xWcU1saE5UUStkdGk2bGxiRVBaOVIyZ1JZWjVZVWZsUHB5eGNLNGd4YTlCLzE0T0dBenRIUlg2QzVjCiAgICAgIHZmeGlzRENOVzRDQTBqb3E0V3V1anVZeHRYVlpRbVRNK2UzMFM4YnBQMmJBSW1GSGgweHB6SjJvTmpwc2piQ3UKICAgICAgSDFFUzA2RUNnWUVBM3o4TU9DeXJWSGhuRGVvRWNpb2k1Um1DRTEvWHRhWkZIYXpPZ2NvRHZLTWVNV3h0akRQUAogICAgICB1b0owbmF6MnY3WWRBYXFwcDRIekh0c2hTSkNZdEpmQWxuNHRvMFVROWMzQ0tpRzB5aTNSUFJta2xHUjE2WTBjCiAgICAgIDR5WHFxUnR2WTlGYjhGMUtNdXlaMUtkSzFCVkNmSjFQMlhzOE8vKzZFTDFIbGtuY3VYRlpXN01DZ1lFQXdoTUgKICAgICAgc0JtejJLQ3B6QTVDbTdYUVEvUVJ6QUhNLzZLaVVpbElVMmxZN0hkUmRhTHI3SFBwK0R5dEw2NVZ2b0twWFEzRgogICAgICBKTG5WREl0R0ZLcE9pTERwMUlHVmV6c0l6d2VwNHRsVElGcHpvT1o5Nlk4a1N0YVlOUERtV0RLZFRMNUdjalBhCiAgICAgIHVZcy92eWZhNjZaK200M2loUTRhSjB6amgreWxqRGJuMHh5M2RFY0NnWUFQc0tDdE9nWjRrMVc2MXAybFlHeS8KICAgICAgYVVHSkZ3MVVDUEdHbW1TUkhwK1FuRzQ4endBTUFJQXkvWVF3cUwxV3ovZk43QzZzUlNmUEhWdURmQllmYXlMdgogICAgICA4TUpJWFV4SjJrSXhMOWxDOUdGbVIrMFhPTkJJcjlBOTdxWkZhRlkxejdzRWM2b0pWak9oakhobjIyNm16MitUCiAgICAgIE8yUUtXM2k2UUhOTmpyZGltU0xNblFLQmdRQ21nZlZDbllxei9ZUXcwcnRMSlA1K2p0VUdGelZ1em5ZOXo3V0IKICAgICAgK3d5VU5QcnExdEZibVVmUDl4OFBuWjlyU0dkT3N4WEZvTHF0ZklDd0VqNDNBTEpkNUovL2puTE1UV0x3Z2t6VAogICAgICBvVWM3Y1FYdWNTVk9JRGVPbEhETWt3QnFhNFc5VGNnSEVQV3NaK0ZuOVAwRE1RUjc2OUY4am5kWWt5eWwxQ1dwCiAgICAgIDl5VmUyUUtCZ0NOQ2JXclNEc3IyWXJCV2R4SUl2dmtKNERNVGtNS3VHbFo3MVRNdlRUY2NZNm5vVWJRTmFkN1YKICAgICAgRFVLbnZ3SUJxaWpRS1JtSk8zZG9UQVJjM1hrNnkzOGRVTUxWSTJWUUJPbW00S0xpMm9PUGRVc0N1Y25rV1B0LwogICAgICBtak5HRXdUL2lOOENmbDBnVktYeGtIMzhYTHRmU1c5cmFZZUkySGdMZXB1OHYxQWlTaVZrCiAgICAgIC0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCiAgICAgIAotICAgcGF0aDogL2V0Yy9rdWJlcm5ldGVzL3BraS9mcm9udC1wcm94eS1jYS5jcnQKICAgIG93bmVyOiByb290OnJvb3QKICAgIHBlcm1pc3Npb25zOiAnMDY0MCcKICAgIGNvbnRlbnQ6IHwKICAgICAgLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCiAgICAgIE1JSUM2akNDQWRLZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKICAgICAgY201bGRHVnpNQjRYRFRJeU1EZ3dNekE0TWpBME5sb1hEVE15TURjek1UQTRNalUwTmxvd0ZURVRNQkVHQTFVRQogICAgICBBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTXVECiAgICAgIEJXUzM5enlzcm5pZFYxY3k2eDduYTZzcFVla3dIK0k3aFNrQ2VqRmczZTdtU0wzMm10U3poTk1UMG1kZHd5U00KICAgICAgamd6TjNuc01rMTMxbWNKVzVxQWI1ZkdhMzZzVXZLcUl0VmYwYlgzdXNJSm9lU0JXTlAzb3BnWHBnODhybmxlTgogICAgICBLRmpNeW5kYXFqL1FGc0x6YzRNZTJmT3lHdzNIOGZTcE5ia2JUN2FqamE2YnZITCt6U1BFbG9EUzgvMTVpUWNuCiAgICAgIHUrbHl2aEtObi9Vc3g2QjVmcG1BbnloU0VHNE1LS0xBK2FyLy8yVzV3WWhDSHlGNGc3KzY3TnpEWU9ZRGtSYkQKICAgICAgMklvN0ljWUNJbCtuckhFQnBXSm9XY25GMDJFbXJEbXh2dEl0NlN6VFU1R3BKOThCem9DLzVEL0ZLUzNnWmgzTwogICAgICBTdWF2dThmcEhmZkUvb0NGOWVzQ0F3RUFBYU5GTUVNd0RnWURWUjBQQVFIL0JBUURBZ0trTUJJR0ExVWRFd0VCCiAgICAgIC93UUlNQVlCQWY4Q0FRQXdIUVlEVlIwT0JCWUVGS1JSbE5NL040cXRjdm9DS0ttZUFLcDV5TTZyTUEwR0NTcUcKICAgICAgU0liM0RRRUJDd1VBQTRJQkFRQXRxQWFJRUZ6cC9kNHU3eklSai9xczcwdHJRbFNEVjR1bGRabjZUSVFUZkJuVwogICAgICBDT05HNk5sbTZPMnlJWjBwaGdyM240MEVaQm5RVnB5aFlPbWVlc3JCWnJyUURxWjhPMG5idzZDa3RxZjhRSWQ2CiAgICAgIERMOFp2MmczeVVjRmlZVHdjTlZUWEkrVm5iRG9KYzkvQ0hsRHhzQmF0YVI4djJMbTVMM3RDY1c3TjFhTmQ0M2YKICAgICAgZjVSN3ZVSHF4U0YxakhnVVJycmV5dzVmd1lTejNreUhFbVBtZFd4TTJuL3o2dUFmeG84Y1F4enEyOVZZT0dvbgogICAgICBLUnNuK1VsdUZEMUlUOW5rMkZtUGVibFdTT1VaT3FGWkpuM3g5Y2k2dWRZT0J5S0d1Ujh3T3VDTGt3WDA4MDVyCiAgICAgIEFmQktNeWJIN2hlcFJZSzN2Z2NaWG03czJ5YkhBSis4RjZhelNMQ1cKICAgICAgLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQogICAgICAKLSAgIHBhdGg6IC9ldGMva3ViZXJuZXRlcy9wa2kvZnJvbnQtcHJveHktY2Eua2V5CiAgICBvd25lcjogcm9vdDpyb290CiAgICBwZXJtaXNzaW9uczogJzA2MDAnCiAgICBjb250ZW50OiB8CiAgICAgIC0tLS0tQkVHSU4gUlNBIFBSSVZBVEUgS0VZLS0tLS0KICAgICAgTUlJRW93SUJBQUtDQVFFQXk0TUZaTGYzUEt5dWVKMVhWekxySHVkcnF5bFI2VEFmNGp1RktRSjZNV0RkN3VaSQogICAgICB2ZmFhMUxPRTB4UFNaMTNESkl5T0RNM2Vld3lUWGZXWndsYm1vQnZsOFpyZnF4Uzhxb2kxVi9SdGZlNndnbWg1CiAgICAgIElGWTAvZWltQmVtRHp5dWVWNDBvV016S2QxcXFQOUFXd3ZOemd4N1o4N0liRGNmeDlLazF1UnRQdHFPTnJwdTgKICAgICAgY3Y3Tkk4U1dnTkx6L1htSkJ5ZTc2WEsrRW8yZjlTekhvSGwrbVlDZktGSVFiZ3dvb3NENXF2Ly9aYm5CaUVJZgogICAgICBJWGlEdjdyczNNTmc1Z09SRnNQWWlqc2h4Z0lpWDZlc2NRR2xZbWhaeWNYVFlTYXNPYkcrMGkzcExOTlRrYWtuCiAgICAgIDN3SE9nTC9rUDhVcExlQm1IYzVLNXErN3gra2Q5OFQrZ0lYMTZ3SURBUUFCQW9JQkFFVFRacnVOUzl3Rk9td28KICAgICAgS2lXZlhzend6d1R2MEhmZ2dxZnNJVGloVWRucFBLVlMxRDhLYTRxTHU5djIxQzJKRkRvRUh2Wk5tWFJiNkdyYQogICAgICBhTW5Fd2ZKYi9RUWNzSkFYVDBjTlBPY21EdkdNQzczT3YwZ2tYMytQY3JhRkpzS2xxY05LUmQ3aVE0Ymg3cm51CiAgICAgIEVnU1VlUGhiTXJLc0JXSS93S0JScVkyVW92ek04SWx0MFlTOTFjZE0xaUpjWEZUU0ZMczVwdGh4UnBIdThxVDIKICAgICAgTXVkOUpBbVRwT1RYVnRXVThseHBsZ3I4cXJxaUJVc3BTZDdBMXNTaklraDhpYTlCR0lCMm9uR2lFZFQvZTd3ZgogICAgICAvK3BqODNnTkpwRUJGay9NUmJuYnc4ZFRvQWNmbnpuRG1RVmYyNExzZ0hJeFhOMEZkSmFrM0tWSURMWk51S1ViCiAgICAgIDlXbnNQT0VDZ1lFQTAreDd1MEM1QVc4T3paWXl2VkswMHhZVzFudnI2dzFFTlR5SStITVB5RmRQUVlSU2hkUWgKICAgICAgWkNUZkFjSDVZaXd1Q0ZxRVQ0cDIwSnZqS3hPUU84MXVyRFQwS1BEQlJNc2NVb1czbXgvdG50TVg2TlkvS25kbQogICAgICBoZEVIMFZNUm1Ydk1vOU0zWFY3cmdsKzc4NHQxZmo4MTRVaW1WU2RsNHdjWkR1cmdPMTRjMHBVQ2dZRUE5ZGFvCiAgICAgIFE0THlkMVJsbkFTeld4c2x6ckM2QTZwVGFmZjJuakMwNTd5aXVzRS8yQ2tDSWVZbXZMYlpaSkdKTkdjWFk5VHAKICAgICAgeUVva25EVU54MG5LZVhZbkg0b1Y0TUVjVC9CbEZsdlAzWE9YaWR6NGxURzNkTDNzRWRNajFWZ0lDVmQrRnMxdAogICAgICBYcWZtK2k2dzFQUGM2a3JuSGJYMElXMjhUMUwyK09NcXhoMmlCbjhDZ1lBZU1VMzdncUFaQlRLTnRiMXEzYktuCiAgICAgIGREa3l1NXNEOVBMbnhzVVk2SU95SGtaTFprZS9pMVpxaHhwQ2pOa3oxR21HaFNiZWtqS1ZTL0JVZmNnSnpSM2MKICAgICAgYVByMExrREt4VWsydEpoUkFINkJKei83eXpKYW9ZSTR4R3dodFgwSGFlemcxa0hJQ3JMdzh5UzY4UDUvU3hBcAogICAgICBGWW1sRGlUazhHandpQ1FFTVVkWDlRS0JnRkNjck54R2FoOTdDejZYeEFCUjdKblVGWXJ5SlJ3UWRVdjJDTHdjCiAgICAgIGZQZmtPbjAxSlQvY2FrTmphZkd5VDExaG1LZmh2eTh3TU1VUUdJNkt3ZHdHUkZueE82OVJZMmxMR0xxMkxIa2YKICAgICAgV0VlYXIrQ3NSczMvSVJQUE9tYlEwUUhQTU1kbFlVR3lxT2pNdXF0NXM2MFlGcVVGYnlJdkM1cXZSOURoSEx1TwogICAgICBKLzBkQW9HQkFJVEk5ODBqRFJGaURENzFLVWt1RGNqc3lsakxxR1BVS3hvTis3dGZrak90NFJ1UGZpMFlDa2c4CiAgICAgIDFhbzB1RlVwbURyWUdqdDcrZGNJNVVaY2UzRVRpSmRhVlZYTVQ3YzJBUnI1MGIrbzJRcWxhZDNXTHh4UzBuTSsKICAgICAgZmlFT3NBVEhXUHpKTU1YRW1KS2hsclhKUUxtbXgrNXVaaTBXRE4vNWdCa0w5d3BDdEFXagogICAgICAtLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQogICAgICAKLSAgIHBhdGg6IC9ldGMva3ViZXJuZXRlcy9wa2kvc2EucHViCiAgICBvd25lcjogcm9vdDpyb290CiAgICBwZXJtaXNzaW9uczogJzA2NDAnCiAgICBjb250ZW50OiB8CiAgICAgIC0tLS0tQkVHSU4gUFVCTElDIEtFWS0tLS0tCiAgICAgIE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBelBRSFhDMlJOVmlnd3FtRzhvQXgKICAgICAgVlF0cXFlc3NQeHpKVVlVRlpqOE9Fc1NzbXYzNU83ek9UMy9Eam1udHh1VTkrSWNaeUZjVzAxaWg4KzRHa0Z0LwogICAgICBaa2Fzd1IxSVA1OFIwNTFsTFFuYUFDYUpjM2lZNk1rK3F4WmJGVk4yMG5QY1FnT2dGdW5GbCt5cEZBMmVBYnNjCiAgICAgIEpkUU1XSkFlM3J2R3RjSnV6MXE1RTlDWHlzQ0k1bXpTb2oxR0d6ZnQ5ZlQ1djJlbE9zcVZvdEh6UFdsRWRrZWwKICAgICAgZndBVkxBa2FUTWc5TzFFR3ZadEZGdVdlUXFjN2lzcFZGaW9Ja0drUzYxS0YwSytTK1laWGJCN2c2Wkt5djN0eQogICAgICAzcytSVkU3MTVlT0hjd25OVXVMTzhYV0h2Rjd4QmR4QkJNa2trQkpoWklSNFd0QnJldk5oSWducW9nS1ZSSHlXCiAgICAgIE1RSURBUUFCCiAgICAgIC0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLQogICAgICAKLSAgIHBhdGg6IC9ldGMva3ViZXJuZXRlcy9wa2kvc2Eua2V5CiAgICBvd25lcjogcm9vdDpyb290CiAgICBwZXJtaXNzaW9uczogJzA2MDAnCiAgICBjb250ZW50OiB8CiAgICAgIC0tLS0tQkVHSU4gUlNBIFBSSVZBVEUgS0VZLS0tLS0KICAgICAgTUlJRXBBSUJBQUtDQVFFQXpQUUhYQzJSTlZpZ3dxbUc4b0F4VlF0cXFlc3NQeHpKVVlVRlpqOE9Fc1NzbXYzNQogICAgICBPN3pPVDMvRGptbnR4dVU5K0ljWnlGY1cwMWloOCs0R2tGdC9aa2Fzd1IxSVA1OFIwNTFsTFFuYUFDYUpjM2lZCiAgICAgIDZNaytxeFpiRlZOMjBuUGNRZ09nRnVuRmwreXBGQTJlQWJzY0pkUU1XSkFlM3J2R3RjSnV6MXE1RTlDWHlzQ0kKICAgICAgNW16U29qMUdHemZ0OWZUNXYyZWxPc3FWb3RIelBXbEVka2VsZndBVkxBa2FUTWc5TzFFR3ZadEZGdVdlUXFjNwogICAgICBpc3BWRmlvSWtHa1M2MUtGMEsrUytZWlhiQjdnNlpLeXYzdHkzcytSVkU3MTVlT0hjd25OVXVMTzhYV0h2Rjd4CiAgICAgIEJkeEJCTWtra0JKaFpJUjRXdEJyZXZOaElnbnFvZ0tWUkh5V01RSURBUUFCQW9JQkFRQ1lFdW56SjR4N1BNdnMKICAgICAgSk1ZUTRiVzVHTU9JV1F0M3VQQllJSStsRWx4cTZLdjZSVUROWm9iZXpqcFlUWmswMzV4ZjhEN2RQR0dmYUVDagogICAgICBNcGFFUHFBRlQ2T1hseGFvdm1zSHpkM28wVXFFbWhPYkxueW5IY3YyUHB4TzhxTlQvTXdOMzRyRjlhZTcxc3FPCiAgICAgIEtweDNSRkxhYnNES1pnWEIxeXJXYXZLMXdPZGJIek1oMlNQYmJ1Rk5iYjY5WXdtMnFsVnFZd1RadUxTek5zaEcKICAgICAgdGZkVU0rMjBrV29CM2xvemJSeklyY2dHUUVZS2gvSWM3RDBpK3BndXJ6RlJiSnRSQjdxSTl4NkROTHlQem1LTQogICAgICBNY2libkxSME9zK2lCL2k1SU84VG5YcVphMElNVlNudWgxZE5Mc1gvNmRoK1hiV0RIY25QdzFGYVhXTXcxSkhVCiAgICAgIHlEamwrenlSQW9HQkFQUSs1bFJKYlp2UEJEai9DSDBUck1hb005a28wUUgxOWx0SjZQWEZNL3gwSWxMSHVwdmwKICAgICAgQlBtam1sOEo0VXIvZnRCbDhnOTBPZkU1ZXpnRVY4ZkRoMS81WXdyb0Z2UzE5UTd5L0YzRjcxUXIzMGZSY3F1awogICAgICAybmRBc2lMS2RrRXA4ektYL2VGSmU4b0dkZkFKY1NmUmpYWEZLZTFKNHlicUJOQjJ6UFhUMm5RckFvR0JBTmJSCiAgICAgIERBVDAxZlUvMkJtZmZoaS9lU00xa01BYkFDSlhxUmw5dG9WREhlSm12d1c5RUQ4WW5DaVdTZ09aSm1HT0Irb0kKICAgICAgYnJPdkFNZTJKbng3SmVKYzh0S3plSXVOTE1LRmxxZmE1UHFMamk3b21RdVl3MEpFY0NQblpRd1pnTEFiRWhwLwogICAgICBaOHBUbFFlS2tpcDY3bHhBZ1pEU2NEaVdNSkJsbHgvT0g0RFUwMlVUQW9HQkFNRVpQWFlqdTFGMGdJMGpMQzNlCiAgICAgIHNUazU0QXZ1MWhjcncwSjNFNFBERGcrb0xUNnZBMXllMnFrVzdFUDVCcklKZnRQNTFUN2NqN2FqMEVRQVF2bi8KICAgICAgSHZjRXJvWC82YTQ4Y09zSnRmWFpPQmFldk44RnV4Znl0SG1WbjRBYit4UVh1MXNqaVNka3RrYUpoeEpvRkpyNwogICAgICBkRkJJdVpZTlZWWDlyQ0szMmVEOFJmaVRBb0dBUDkvVEFocEhFSENXY2pBQmo1eEhpZGVnbmU2cFlJek9SRDBrCiAgICAgIEs0WGtlZkJ4Tm1TY1V4YWZRRlpIMWNBUk1JcktBYVhXUE9sNWd1aS9rdDRQU3JxMm5UNHVSdGlJaWFLdFJHWUwKICAgICAgRmhDdkMzV3dKRW1kTGJRcDRCTXE4YWtYb2NXNjRWUW02WHRtNGVJclNpUlpnZWJRWDk2aTdjQ0MyanpLN2ZNZAogICAgICBYUEpybFM4Q2dZQWxxK1ZYYkgyVTFkK1NZMW1qdTZoZjJTWHNvYmpGNzIweVE2Zlo3b3BiblpOeDNOejd6MmRPCiAgICAgIE0zYXRjOUV3VUUyMmlqYVJFd2dvbThHQW9DTE4xTXRmaU5LMGRFbDZDZHJkSnY5cEFlVW9jNHFuK2xNeVNyQzYKICAgICAgS3Mvc3hFdHc4dXo0VitLd3p4QXVpd3JkSGtOSWxIYWZTOWF2Um5PbW14dUQzbEFmb1dZTXV3PT0KICAgICAgLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0KICAgICAgCi0gICBwYXRoOiAvZXRjL2t1YmVybmV0ZXMvY2xvdWQuY29uZgogICAgZW5jb2Rpbmc6ICJiYXNlNjQiCiAgICBvd25lcjogcm9vdAogICAgcGVybWlzc2lvbnM6ICcwNjAwJwogICAgY29udGVudDogfAogICAgICBXMGRzYjJKaGJGMEtZWFYwYUMxMWNtdzlhSFIwY0RvdkwydGxlWE4wYjI1bExtOXdaVzV6ZEdGamF5NXpkbU11WTJ4MWMzUmxjaTVzYjJOaGJDOTJNd3AxYzJWeWJtRnRaVDBpWVdSdGFXNGlDbkJoYzNOM2IzSmtQU0owWlhOMFFIQmhjM04zTUhKa0lncDBaVzVoYm5RdGJtRnRaVDBpWVdSdGFXNGlDbVJ2YldGcGJpMXVZVzFsUFNKRVpXWmhkV3gwSWdweVpXZHBiMjQ5SWxKbFoybHZiazl1WlNJSwotICAgcGF0aDogL2V0Yy9jZXJ0cy9jYWNlcnQKICAgIGVuY29kaW5nOiAiYmFzZTY0IgogICAgb3duZXI6IHJvb3QKICAgIHBlcm1pc3Npb25zOiAnMDYwMCcKICAgIGNvbnRlbnQ6IHwKICAgICAgQ2c9PQotICAgcGF0aDogL3J1bi9rdWJlYWRtL2t1YmVhZG0ueWFtbAogICAgb3duZXI6IHJvb3Q6cm9vdAogICAgcGVybWlzc2lvbnM6ICcwNjQwJwogICAgY29udGVudDogfAogICAgICAtLS0KICAgICAgYXBpU2VydmVyOgogICAgICAgIGV4dHJhQXJnczoKICAgICAgICAgIGNsb3VkLWNvbmZpZzogL2V0Yy9rdWJlcm5ldGVzL2Nsb3VkLmNvbmYKICAgICAgICAgIGNsb3VkLXByb3ZpZGVyOiBvcGVuc3RhY2sKICAgICAgICBleHRyYVZvbHVtZXM6CiAgICAgICAgLSBob3N0UGF0aDogL2V0Yy9rdWJlcm5ldGVzL2Nsb3VkLmNvbmYKICAgICAgICAgIG1vdW50UGF0aDogL2V0Yy9rdWJlcm5ldGVzL2Nsb3VkLmNvbmYKICAgICAgICAgIG5hbWU6IGNsb3VkCiAgICAgICAgICByZWFkT25seTogdHJ1ZQogICAgICBhcGlWZXJzaW9uOiBrdWJlYWRtLms4cy5pby92MWJldGEzCiAgICAgIGNsdXN0ZXJOYW1lOiB0ZXN0CiAgICAgIGNvbnRyb2xQbGFuZUVuZHBvaW50OiAxNzIuMzUuMC44Mjo2NDQzCiAgICAgIGNvbnRyb2xsZXJNYW5hZ2VyOgogICAgICAgIGV4dHJhQXJnczoKICAgICAgICAgIGNsb3VkLWNvbmZpZzogL2V0Yy9rdWJlcm5ldGVzL2Nsb3VkLmNvbmYKICAgICAgICAgIGNsb3VkLXByb3ZpZGVyOiBvcGVuc3RhY2sKICAgICAgICBleHRyYVZvbHVtZXM6CiAgICAgICAgLSBob3N0UGF0aDogL2V0Yy9rdWJlcm5ldGVzL2Nsb3VkLmNvbmYKICAgICAgICAgIG1vdW50UGF0aDogL2V0Yy9rdWJlcm5ldGVzL2Nsb3VkLmNvbmYKICAgICAgICAgIG5hbWU6IGNsb3VkCiAgICAgICAgICByZWFkT25seTogdHJ1ZQogICAgICAgIC0gaG9zdFBhdGg6IC9ldGMvY2VydHMvY2FjZXJ0CiAgICAgICAgICBtb3VudFBhdGg6IC9ldGMvY2VydHMvY2FjZXJ0CiAgICAgICAgICBuYW1lOiBjYWNlcnRzCiAgICAgICAgICByZWFkT25seTogdHJ1ZQogICAgICBkbnM6IHt9CiAgICAgIGV0Y2Q6IHt9CiAgICAgIGltYWdlUmVwb3NpdG9yeTogcmVnaXN0cnkuYWxpeXVuY3MuY29tL2dvb2dsZV9jb250YWluZXJzCiAgICAgIGtpbmQ6IENsdXN0ZXJDb25maWd1cmF0aW9uCiAgICAgIGt1YmVybmV0ZXNWZXJzaW9uOiB2MS4yMi44CiAgICAgIG5ldHdvcmtpbmc6CiAgICAgICAgZG5zRG9tYWluOiBjbHVzdGVyLmxvY2FsCiAgICAgICAgcG9kU3VibmV0OiAxOTIuMTY4LjAuMC8xNgogICAgICBzY2hlZHVsZXI6IHt9CiAgICAgIAogICAgICAtLS0KICAgICAgYXBpVmVyc2lvbjoga3ViZWFkbS5rOHMuaW8vdjFiZXRhMwogICAgICBraW5kOiBJbml0Q29uZmlndXJhdGlvbgogICAgICBsb2NhbEFQSUVuZHBvaW50OiB7fQogICAgICBub2RlUmVnaXN0cmF0aW9uOgogICAgICAgIGt1YmVsZXRFeHRyYUFyZ3M6CiAgICAgICAgICBjbG91ZC1jb25maWc6IC9ldGMva3ViZXJuZXRlcy9jbG91ZC5jb25mCiAgICAgICAgICBjbG91ZC1wcm92aWRlcjogb3BlbnN0YWNrCiAgICAgICAgbmFtZTogJ3t7IGxvY2FsX2hvc3RuYW1lIH19JwogICAgICAgIHRhaW50czogbnVsbAogICAgICAKLSAgIHBhdGg6IC9ydW4vY2x1c3Rlci1hcGkvcGxhY2Vob2xkZXIKICAgIG93bmVyOiByb290OnJvb3QKICAgIHBlcm1pc3Npb25zOiAnMDY0MCcKICAgIGNvbnRlbnQ6ICJUaGlzIHBsYWNlaG9sZGVyIGZpbGUgaXMgdXNlZCB0byBjcmVhdGUgdGhlIC9ydW4vY2x1c3Rlci1hcGkgc3ViIGRpcmVjdG9yeSBpbiBhIHdheSB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBib3RoIExpbnV4IGFuZCBXaW5kb3dzIChta2RpciAtcCAvcnVuL2NsdXN0ZXItYXBpIGRvZXMgbm90IHdvcmsgd2l0aCBXaW5kb3dzKSIKcnVuY21kOgogIC0gJ2t1YmVhZG0gaW5pdCAtLWNvbmZpZyAvcnVuL2t1YmVhZG0va3ViZWFkbS55YW1sICAmJiBlY2hvIHN1Y2Nlc3MgPiAvcnVuL2NsdXN0ZXItYXBpL2Jvb3RzdHJhcC1zdWNjZXNzLmNvbXBsZXRlJwo=
kind: Secret
metadata:
  name: test-test
  namespace: default
type: cluster.x-k8s.io/secret
```
4.模板文件
- openstackmachinetemplate
```
apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
kind: OpenStackMachineTemplate
metadata:
  name: test-test
  namespace: default
spec:
  template:
    spec:
      cloudName: test
      flavor: k8s.workload
      identityRef:
        kind: Secret
        name: test-cloud-config
      image: test-capo
      securityGroups:
      - name: default
      sshKeyName: jian
```
- kubeadmconfigtemplate(此项实际用处已经没有 但machinedeployment引用为空会导致webhook校验不过 machine不创建)
```
apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
kind: KubeadmConfigTemplate
metadata:
  name: test-test
  namespace: default
spec:
  template:
    spec:
      files:
      - content: W0dsb2JhbF0KYXV0aC11cmw9aHR0cDovL2tleXN0b25lLm9wZW5zdGFjay5zdmMuY2x1c3Rlci5sb2NhbC92Mwp1c2VybmFtZT0iYWRtaW4iCnBhc3N3b3JkPSJ0ZXN0QHBhc3N3MHJkIgp0ZW5hbnQtbmFtZT0iYWRtaW4iCmRvbWFpbi1uYW1lPSJEZWZhdWx0IgpyZWdpb249IlJlZ2lvbk9uZSIK
        encoding: base64
        owner: root
        path: /etc/kubernetes/cloud.conf
        permissions: "0600"
      - content: Cg==
        encoding: base64
        owner: root
        path: /etc/certs/cacert
        permissions: "0600"
      format: cloud-config
      joinConfiguration:
        nodeRegistration:
          kubeletExtraArgs:
            cloud-config: /etc/kubernetes/cloud.conf
            cloud-provider: openstack
          name: '{{ local_hostname }}'
```
5.创建machinedeployment/machineset资源
```
apiVersion: cluster.x-k8s.io/v1beta1
kind: MachineSet
metadata:
  name: test-md-1
  namespace: default
spec:
  clusterName: test
  deletePolicy: Random
  replicas: 1
  selector:
    matchLabels:
      cluster.x-k8s.io/cluster-name: test
      cluster.x-k8s.io/deployment-name: test-md-1
  template:
    metadata:
      labels:
        cluster.x-k8s.io/cluster-name: test
        cluster.x-k8s.io/deployment-name: test-md-1
    spec:
      bootstrap:
        configRef:
          apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
          kind: KubeadmConfigTemplate
          name: test-test
      clusterName: test
      failureDomain: default-az
      infrastructureRef:
        apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
        kind: OpenStackMachineTemplate
        name: test-test
      version: v1.22.8
```
6.自动创建的machine资源中 添加对secret的引用(即指定dataSecretName为刚刚创建的secret)
```
apiVersion: cluster.x-k8s.io/v1beta1
kind: Machine
metadata:
  name: test-md-1-99cww
  namespace: default
spec:
  bootstrap:
    configRef:
      apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
      kind: KubeadmConfig
      name: test-test-22bhj
      namespace: default
      uid: b5d70755-0096-4496-99a9-641e09cfbb42
    dataSecretName: test-test
  clusterName: test
  failureDomain: default-az
  infrastructureRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
    kind: OpenStackMachine
    name: test-test-4r9lp
    namespace: default
    uid: f6c12392-f7aa-44dc-99f6-88672d0e861e
  providerID: openstack:///ce64d4fd-a631-4479-9f98-413133c24bab
  version: v1.22.8
```
由此 则可以不修改代码绕过master 不初始化完毕 对work的锁定，创建对应的虚拟机